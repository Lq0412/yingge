# 5 天开发与文档计划（MVP）

> 目标：在 5 天内交付英歌舞在线试装后端 MVP 可用版本，并配套接口文档。

## 1. 成果目标
- 打通注册/登录、图片上传（COS/OSS）、AI 试装、试装记录查询的后端链路。
- 接入对象存储和 AI 服务的异常处理，确保失败有明确返回。
- 提供 Swagger/Knife4j 接口文档，覆盖 MVP 功能。
- 代码与文档保持一致：`mvp.md`、`prd.md`、本计划同步更新。

## 2. 日程拆分
### 第 1 天：环境与骨架
- 确认技术栈、依赖（数据库、COS/OSS、AI 服务）与配置方式。
- 初始化 Spring Boot 工程骨架，接入 Swagger/Knife4j。
- 明确数据模型草稿（User/Image/TryOnRecord）并创建基础表。

### 第 2 天：账号与存储准备
- 实现注册/登录接口，密码加密存储，基础鉴权（JWT 或 Session）。
- 抽象文件存储服务接口，打通 COS/OSS SDK，完成上传/签名获取的最小实现。
- 本地与测试环境配置分离，敏感信息走环境变量/本地配置。

### 第 3 天：图片上传与服装素材
- 开发人像/服装图片上传接口：格式/大小校验、上传存储、记录入库。
- 预置一批英歌舞服装素材导入脚本或管理接口（MVP 可脚本导入）。
- 完成图片元数据的查询接口，便于前端选择。

### 第 4 天：AI 试装与记录
- 设计并实现试装接口：校验登录与图片可用性，调用外部 AI 服务，同步返回结果。
- 处理 AI 异常与超时；结果图上传存储，写入试装记录。
- 试装记录列表/详情接口（仅当前用户可见）。

### 第 5 天：测试、优化与文档
- 覆盖主流程与异常流程的接口测试（本地/集成环境）。
- 补充日志与错误码；检查性能（p95 ≤ 1s，生成 ≤ 10s）。
- 更新 Swagger/Knife4j 描述，核对 `mvp.md`、`prd.md` 与实现一致。

## 3. 当前风险与TODO
- AI 试装 API 选型与配额：需在第 2 天前确定可用密钥和时延。
- 对象存储权限：需确认公私读策略，避免结果图未鉴权暴露。
- 图片合规：后续可能需要删除/过期策略；MVP 暂不提供删除，但预留接口设计。
- 本计划会随每日进度调整，优先保障“上传 → 生成 → 查看”闭环。
