# 5 天开发与文档计划（第 2 天状态）

> 目标：巩固在线试装闭环，三天内完成提示词模板、文档与配置收尾。

## 1. 当前进展
- 已打通：注册/登录 + Session 鉴权；上传接口 `/api/storage/upload`（COS）；异步试装任务提交/轮询；结果上传 COS；试装记录列表/详情；PRD/MVP 文档更新。

## 第 2 天：后端链路验证与接口对接

### 任务 1：后端配置与链路验证
- 确保 MySQL、COS 和火山的配置可用，完成本地测试。
- 进行完整的自测流程：上传文件 → 提交任务 → 轮询任务状态 → 上传结果 → 记录保存。
- 解决链路中可能遇到的问题，例如文件上传失败、轮询超时等。

### 任务 2：接口文档更新与完善
- 更新 Swagger/Knife4j，补充接口参数示例，标明 Session（Cookie）携带的具体要求。
- 在文档中明确接口的调用顺序和返回结果（特别是错误码）。

### 任务 3：前端接口协作准备
- 与前端确认接口调用顺序：登录 → 上传 → 提交任务 → 轮询 → 展示结果/记录。
- 提供前端需要的接口调用示例，尤其是如何传递 Session 和如何处理不同的返回结果（例如，任务失败、超时）。

---

## 第 3 天：后端提示词模板实现与前端基础搭建

### 任务 1：后端提示词模板实现
- 在后端实现提示词模板的枚举（如妆容、背景等）。
- 定义一个 API 接口来获取提示词模板，前端可以通过此接口获取模板列表。
- 确保提示词模板支持自定义输入，同时为固定模板提供枚举选择。

### 任务 2：Vue 前端基础搭建
- 搭建前端的基础项目结构，确保使用 Vue CLI 或 Vite 创建 Vue 项目。
- 配置 Vue Router 和 Vuex（或 Pinia）进行状态管理。
- 开发基础页面框架：登录页面、上传页面、结果展示页面。

### 任务 3：前端与后端对接
- 在前端页面中集成接口：登录 → 上传文件 → 提交任务 → 轮询 → 展示结果。
- 确保前端能正确携带 Session（Cookie）并处理接口返回的状态（成功、失败、超时等）。

---

## 第 4 天：前端提示词模板实现与联调

### 任务 1：前端提示词模板实现与联调
- 在前端实现提示词模板的选择功能：从后端接口获取固定模板列表，并支持用户自定义输入。
- 完成前端与后端的联调，确保模板能够正确传递，后端返回结果正确显示在前端页面。

### 任务 2：接口错误处理与用户提示
- 为前端页面增加错误处理逻辑，如上传失败、任务超时等。
- 提供清晰的用户提示，确保用户能理解每个操作的结果和进度。

### 任务 3：前端任务提交与轮询实现
- 完成文件上传、任务提交及轮询状态展示的完整页面流程。
- 优化轮询逻辑，确保前端能实时获取任务执行结果。

---

## 第 5 天：稳定性测试、文档完善与录制视频准备

### 任务 1：稳定性与异常路径测试
- 进行全面的稳定性测试，模拟文件上传失败、任务提交失败、超时等场景，确保系统能够优雅地处理这些问题。
- 完成任务轮询和结果展示的异常处理，添加重试机制（如下载失败时的重试）。

### 任务 2：文档更新与收尾
- 更新 PRD/MVP 文档，补充接口说明、错误码说明和前端实现细节。
- 提供必要的配置示例（如 `application-local.yml.example`），确保配置文件不暴露敏感数据。

### 任务 3：准备录制视频与架构图
- **录制视频**：根据当前进度，录制项目的使用流程视频。包括注册/登录、文件上传、任务提交与轮询、结果展示等过程。视频需简洁明了，重点展示关键功能。
- **架构图绘制**：绘制系统架构图，清晰展示前端、后端、数据库及 COS 等各部分的协作关系。
    - **架构图内容**：包括前端（Vue）、后端（接口与火山配置）、数据库（MySQL）、存储（COS）等，标明数据流和接口调用顺序。

---

## 总结

- **第 2 天**：专注于后端验证与链路测试，确保接口文档完善并与前端协作顺畅。
- **第 3 天**：完成后端提示词模板实现与 Vue 前端基础搭建，重点实现接口对接。
- **第 4 天**：完成前端提示词模板功能并与后端联调，优化任务提交与轮询流程。
- **第 5 天**：进行稳定性测试，完善文档，并准备录制项目视频与绘制系统架构图。
